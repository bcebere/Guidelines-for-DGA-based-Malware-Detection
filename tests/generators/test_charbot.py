# dga_analysis absolute
from dga_analysis.datasets.dataset_tranco import DatasetTranco
from dga_analysis.generators.charbot import CharBotGenerator as plugin
from dga_analysis.utils.evaluation import generator_metrics, evaluate_generator


def test_charbot_sanity():
    generator = plugin()
    assert generator.name() == "charbot"


def test_charbot_fit():
    X, _ = DatasetTranco().raw()
    plugin().fit(X)


def test_charbot_generate():
    X, _ = DatasetTranco().raw()
    generator = plugin().fit(X)

    samples = generator.generate(10)

    assert len(samples) == 10


def test_charbot_metrics():
    X, _ = DatasetTranco(sample_size=1000).raw()

    score = evaluate_generator(plugin(), X, 2000, 50)

    print(score)
